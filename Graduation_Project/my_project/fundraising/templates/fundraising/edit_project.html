{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Project - CrowdFund</title>
    <link rel="stylesheet" href="{% static 'fundraising/style.css' %}">
    <link rel="icon" type="image/svg+xml" href="{% static 'fundraising/favicon.svg' %}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <a href="{% url 'home' %}" class="logo">
                <i class="fas fa-hand-holding-heart"></i>
                CrowdFund
            </a>
            <ul class="nav-links">
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'project_list' %}">Projects</a></li>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'create_project' %}">Create Project</a></li>
                    <li><a href="{% url 'logout' %}">Logout</a></li>
                {% else %}
                    <li><a href="{% url 'login' %}">Login</a></li>
                    <li><a href="{% url 'register' %}">Register</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <div class="form-container">
            <div style="text-align: center; margin-bottom: 2rem;">
                <i class="fas fa-edit" style="font-size: 3rem; color: #667eea; margin-bottom: 1rem;"></i>
                <h2>Edit Project</h2>
                <p>Update your project details and keep your supporters informed</p>
            </div>
            
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label for="title">
                        <i class="fas fa-heading"></i> Project Title
                    </label>
                    <input type="text" name="title" id="title" value="{{ project.title }}" placeholder="Enter your project title" required>
                </div>

                <div class="form-group">
                    <label for="details">
                        <i class="fas fa-align-left"></i> Project Details
                    </label>
                    <textarea name="details" id="details" rows="6" placeholder="Describe your project, goals, and why people should support it..." required>{{ project.details }}</textarea>
                </div>

                <div class="form-group">
                    <label for="image">
                        <i class="fas fa-image"></i> Project Image
                    </label>
                    {% if project.image %}
                        <div style="margin-bottom: 1rem;">
                            <img src="{{ project.image.url }}" alt="{{ project.title }}" style="max-width: 200px; height: auto; border-radius: 8px; border: 2px solid #eee;">
                            <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">Current image</p>
                        </div>
                    {% endif %}
                    <input type="file" name="image" id="image" accept="image/*" style="padding: 0.5rem; border: 2px dashed #ddd; border-radius: 8px; background: #f9f9f9;">
                    <small style="color: #666; font-size: 0.8rem;">Upload a new image to replace the current one (optional)</small>
                </div>

                <div class="form-group">
                    <label for="target">
                        <i class="fas fa-dollar-sign"></i> Funding Target (USD)
                    </label>
                    <input type="number" name="target" id="target" step="0.01" value="{{ project.target }}" placeholder="Enter your funding goal" required>
                </div>

                <div class="form-group">
                    <label for="start_date">
                        <i class="fas fa-calendar-plus"></i> Start Date
                    </label>
                    <input type="date" name="start_date" id="start_date" value="{{ project.start_date|date:'Y-m-d' }}" required>
                </div>

                <div class="form-group">
                    <label for="end_date">
                        <i class="fas fa-calendar-check"></i> End Date
                    </label>
                    <input type="date" name="end_date" id="end_date" value="{{ project.end_date|date:'Y-m-d' }}" required>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                    <i class="fas fa-save"></i> Update Project
                </button>
            </form>
            
            <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eee;">
                <a href="{% url 'project_list' %}" style="color: #667eea; text-decoration: none; font-weight: 600;">
                    <i class="fas fa-list"></i> View All Projects
                </a>
                <br>
                <a href="{% url 'home' %}" style="color: #666; text-decoration: none; font-size: 0.9rem; margin-top: 1rem; display: inline-block;">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3><i class="fas fa-hand-holding-heart"></i> CrowdFund</h3>
            <p>Empowering dreams, one project at a time.</p>
            <p>&copy; 2024 CrowdFund. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Set minimum date for start_date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('start_date').min = today;
        
        // Set minimum date for end_date to start_date
        document.getElementById('start_date').addEventListener('change', function() {
            document.getElementById('end_date').min = this.value;
        });
    </script>
</body>
</html>
